{% extends "profilebase.html" %}

{% block content %}
<div class="min-h-screen w-full bg-gray-100">
    <div class="px-10 py-6">
        <div class="flex gap-6">

            <!-- LEFT SIDEBAR -->
            <aside class="w-2/12 hidden lg:block">
                <div class="bg-white rounded-xl shadow-sm border p-4 space-y-4 sticky top-6">
                    <h2 class="font-semibold text-gray-700">Menu</h2>
                    <ul class="space-y-2 text-gray-600">
                        <li class="hover:text-blue-500 cursor-pointer">Home</li>
                        <li class="hover:text-blue-500 cursor-pointer">Profile</li>
                        <li class="hover:text-blue-500 cursor-pointer">Notifications</li>
                        <li class="hover:text-blue-500 cursor-pointer">Settings</li>
                    </ul>
                </div>
            </aside>

            <!-- CENTER FEED -->
            <main class="w-full lg:w-5/12 space-y-6">

                <!-- Create Post -->
                <div class="bg-white rounded-xl shadow-sm border p-5">
                    <form method="post" enctype="multipart/form-data" action="{% url 'createpost' %}">
                        {% csrf_token %}

                        <textarea
                            rows="3"
                            name="content"
                            placeholder="What's on your mind?"
                            class="w-full resize-none border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        ></textarea>

                        <div class="flex items-center justify-between mt-4">
                            <input type="file" name="image" class="text-sm">
                            <button
                                type="submit"
                                class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition"
                            >
                                Post
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Posts -->
                {% for post in posts %}
                <div class="bg-white rounded-xl shadow-sm border p-5 space-y-3">
                    <div class="flex items-center gap-4">
                        <div class="h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold">
                            {{ post.author.username|slice:":1"|upper }}
                        </div>
                        <div>
                            <h3 class="font-semibold">{{ post.author.username }}</h3>
                            <p class="text-xs text-gray-500">
                                {{ post.created_at|date:"M d, Y â€¢ H:i" }}
                            </p>
                        </div>
                    </div>

                    <p>{{ post.content }}</p>

                    {% if post.image %}
                    <img src="{{ post.image.url }}"
                         class="w-full rounded-lg max-h-[500px] object-cover border">
                    {% endif %}
                </div>
                {% endfor %}
            </main>

            <!-- RIGHT SIDEBAR 1 -->
            <aside class="w-2/12 hidden xl:block">
                <div class="bg-white rounded-xl shadow-sm border p-4 sticky top-6">
                    <h2 class="font-semibold text-gray-700 mb-3">Suggestions</h2>
                    <ul class="space-y-3 text-sm">
                        <li class="flex justify-between items-center">
                            <span>User_01</span>
                            <button class="text-blue-500">Follow</button>
                        </li>
                        <li class="flex justify-between items-center">
                            <span>User_02</span>
                            <button class="text-blue-500">Follow</button>
                        </li>
                        <li class="flex justify-between items-center">
                            <span>User_03</span>
                            <button class="text-blue-500">Follow</button>
                        </li>
                        <li class="flex justify-between items-center">
                            <span>User_04</span>
                            <button class="text-blue-500">Follow</button>
                        </li>
                    </ul>
                </div>
            </aside>

            <!-- RIGHT SIDEBAR 2 -->
            <aside class="w-2/12 hidden xl:block">
                <div class="bg-white rounded-xl shadow-sm border p-4 sticky top-6">
                    <h2 class="font-semibold text-gray-700 mb-3">Trending</h2>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li>#Django</li>
                        <li>#TailwindCSS</li>
                        <li>#WebDevelopment</li>
                        <li>#Python</li>
                    </ul>
                </div>
            </aside>

        </div>
    </div>
</div>
{% endblock %}